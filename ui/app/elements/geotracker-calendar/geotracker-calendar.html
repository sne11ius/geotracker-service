<link rel="import" href="../../bower_components/polymer/polymer.html">

<polymer-element name="geotracker-calendar" attributes="">
  <template>
    <link rel="stylesheet" href="geotracker-calendar.css">
    <core-header-panel flex>
      <core-toolbar>
        <paper-tabs selected="{{selected}}" noink>
          <paper-tab>Calendar</paper-tab>
          <paper-tab>Locations</paper-tab>
        </paper-tabs>
      </core-toolbar>
      <template if="{{0 == selected}}">
        <div id="calendar"></div>
      </template>
      <template if="{{1 == selected}}">
        <geotracker-location-list baseUrl="/mit/geotracker-service"></geotracker-location-list>
      </template>
    </core-header-panel>
  </template>
  <script>
    (function () {
      Polymer({
        selected: 0,
        selectedChanged: function() {
          $(this.$.calendar).fullCalendar('render');
        },
        attached: function() {
          $(this.$.calendar).fullCalendar({
            header: {
              left: 'prev,next today',
              center: 'title',
              right: 'month,agendaWeek,agendaDay',
            },
            allDaySlot: false,
            defaultView: 'agendaWeek'
          });
          window.setTimeout(function() {
            $(this.$.calendar).fullCalendar('render');
          }, 500);
        }
      });
    })();
  </script>
</polymer-element>
